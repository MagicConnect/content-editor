<div class="loader" *ngIf="mod.isLoading">
  <div class="loading-text">
    Loading...
  </div>
</div>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="#">MagiCon! Tools</a>

  <div class="collapse navbar-collapse">
    <div class="btn-group ml-auto" btnRadioGroup [(ngModel)]="currentPage">
      <button class="btn btn-info btn-sm mb-0" btnRadio="ability">Ability ({{ mod.currentPack.abilities.length }})</button>
      <button class="btn btn-info btn-sm mb-0" btnRadio="banner">Banner ({{ mod.currentPack.banners.length }})</button>
      <button class="btn btn-info btn-sm mb-0" btnRadio="character">Character ({{ mod.currentPack.characters.length }})</button>
      <button class="btn btn-info btn-sm mb-0" btnRadio="chip">Chip ({{ mod.currentPack.chips.length }})</button>
      <button class="btn btn-info btn-sm mb-0" btnRadio="enemy">Enemy ({{ mod.currentPack.enemies.length }})</button>
      <button class="btn btn-info btn-sm mb-0" btnRadio="item">Item ({{ mod.currentPack.items.length }})</button>
      <button class="btn btn-info btn-sm mb-0" btnRadio="map">Map ({{ mod.currentPack.maps.length }})</button>
      <button class="btn btn-info btn-sm mb-0" btnRadio="shop">Shop ({{ mod.currentPack.shops.length }})</button>
      <button class="btn btn-info btn-sm mb-0" btnRadio="skill">Skill ({{ mod.currentPack.skills.length }})</button>
      <button class="btn btn-info btn-sm mb-0" btnRadio="weapon">Weapon ({{ mod.currentPack.weapons.length }})</button>
    </div>

    <div class="btn-group ml-auto mr-auto" *ngIf="!auth.loggedIn">
      <button class="btn btn-info btn-sm mb-0" (click)="export()" [disabled]="auth.loginInProcess">Export</button>
      <button class="btn btn-warning btn-sm mb-0" (click)="uploadContent.click()" [disabled]="auth.loginInProcess">Import</button>
      <input type="file" #uploadContent class="hidden" accept=".json" (change)="import($event, uploadContent)"/>
      <button class="btn btn-danger btn-sm mb-0" (click)="reset()" [disabled]="auth.loginInProcess">Reset</button>
    </div>

    <div class="btn-group ml-auto" *ngIf="!auth.loggedIn">
      <button class="btn btn-sm mb-0"
              [ngClass]="['btn-' + currentColor]"
              (click)="showLogin()"
              placement="left"
              tooltip="If you are not logged in, your data will not be saved, and additionally will be overwritten when you do log in. Exercise caution."
              [disabled]="auth.loginInProcess">Login â“˜</button>
    </div>

    <div class="btn-group ml-auto" *ngIf="auth.loggedIn">
      <button class="btn btn-danger btn-sm mb-0" (click)="logout()">Logout</button>
    </div>
  </div>
</nav>

<div class="container mt-3">
  <div class="row">
    <div class="col-md-12">
      <app-ability-list *ngIf="currentPage === 'ability'"></app-ability-list>
      <app-banner-list *ngIf="currentPage === 'banner'"></app-banner-list>
      <app-character-list *ngIf="currentPage === 'character'"></app-character-list>
      <app-chip-list *ngIf="currentPage === 'chip'"></app-chip-list>
      <app-enemy-list *ngIf="currentPage === 'enemy'"></app-enemy-list>
      <app-item-list *ngIf="currentPage === 'item'"></app-item-list>
      <app-map-list *ngIf="currentPage === 'map'"></app-map-list>
      <app-shop-list *ngIf="currentPage === 'shop'"></app-shop-list>
      <app-skill-list *ngIf="currentPage === 'skill'"></app-skill-list>
      <app-weapon-list *ngIf="currentPage === 'weapon'"></app-weapon-list>
    </div>
  </div>
</div>

<ng-template #login>
  <div class="modal-header">
    <h4 class="modal-title">
      Login
    </h4>

    <div class="has-actions text-center">
      <button class="btn btn-sm btn-primary" (click)="doLogin()" [disabled]="!email || !password">Login</button>
    </div>

    <button class="btn-close close" (click)="abortLogin()">
      <span>&times;</span>
    </button>
  </div>

  <div class="modal-body">
    <div class="row">
      <div class="col-3 text-right font-weight-bold">Email</div>
      <div class="col-9">
        <input type="text" class="form-control" [(ngModel)]="email" (keyup.enter)="doLogin()" />
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-3 text-right font-weight-bold">Password</div>
      <div class="col-9">
        <input type="password" class="form-control" [(ngModel)]="password" (keyup.enter)="doLogin()" />
      </div>
    </div>
  </div>
</ng-template>

